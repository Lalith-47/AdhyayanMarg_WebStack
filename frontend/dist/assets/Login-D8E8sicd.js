import{u as e,j as t,B as a,a as s}from"./index-CKQv3R9A.js";import{r}from"./vendor-CcJAMPNA.js";import{C as n}from"./Card-uZnIhsI-.js";import{I as o}from"./Input-djdKkEw-.js";import{u as i}from"./i18n-BFZeVeRj.js";import{a as l,u as m}from"./router-C42e25Rd.js";import{m as d,k as c,i as x,U as u,c as h,E as g,o as p,p as y,A as w}from"./ui-l3yZ0qgr.js";import"./charts-CYIsZ7Q-.js";import"./forms-CFEThZtO.js";const j=()=>{var j,f;const{t:b}=i(),{login:v}=e(),N=l();null==(f=null==(j=m().state)?void 0:j.from)||f.pathname;const[k,P]=r.useState("login"),[I,S]=r.useState("student"),[C,A]=r.useState({name:"",email:"",password:"",confirmPassword:""}),[q,E]=r.useState({}),[M,$]=r.useState(!1),[z,B]=r.useState(!1),[D,H]=r.useState(!1),O=e=>{const{name:t,value:a}=e.target;A(e=>({...e,[t]:a})),q[t]&&E(e=>({...e,[t]:""}))};return t.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center p-4 sm:p-6 lg:p-8",children:t.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md sm:max-w-lg",children:t.jsxs(n,{className:"p-6 sm:p-8 lg:p-10 shadow-2xl",children:[t.jsx("div",{className:"flex justify-center mb-6",children:t.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg p-1 flex",children:[t.jsxs("button",{type:"button",onClick:()=>S("student"),className:"flex items-center px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 "+("student"===I?"bg-white dark:bg-gray-700 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"),children:[t.jsx(c,{className:"w-4 h-4 mr-2"}),"Student"]}),t.jsxs("button",{type:"button",onClick:()=>S("mentor"),className:"flex items-center px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 "+("mentor"===I?"bg-white dark:bg-gray-700 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"),children:[t.jsx(x,{className:"w-4 h-4 mr-2"}),"Mentor"]})]})}),t.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[t.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16 bg-primary-600 rounded-full flex items-center justify-center mx-auto mb-3 sm:mb-4",children:"student"===I?t.jsx(c,{className:"w-7 h-7 sm:w-8 sm:h-8 text-white"}):t.jsx(x,{className:"w-7 h-7 sm:w-8 sm:h-8 text-white"})}),t.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white mb-2 sm:mb-3",children:"login"===k?`${"student"===I?"Student":"Mentor"} ${b("auth.signIn")}`:`${"student"===I?"Student":"Mentor"} ${b("auth.createAccount")}`}),t.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-300 leading-relaxed px-2",children:"student"===I?"Access your personalized career guidance dashboard":"Manage and guide your students' career journeys"})]}),t.jsxs("form",{onSubmit:async e=>{var t,a,r,n,o,i,l,m,d;if(e.preventDefault(),(()=>{const e={};return"register"===k&&(C.name?C.name.length<2&&(e.name="Name must be at least 2 characters"):e.name="Name is required"),C.email?/\S+@\S+\.\S+/.test(C.email)||(e.email="Please enter a valid email"):e.email="Email is required",C.password?C.password.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required","register"===k&&(C.confirmPassword?C.password!==C.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password"),E(e),0===Object.keys(e).length})()){$(!0),E({});try{let e;if(e="login"===k?await s.login({email:C.email,password:C.password,role:I}):await s.register({name:C.name,email:C.email,password:C.password,role:I}),e.data.success){localStorage.setItem("authToken",e.data.token),v(e.data.user);N("mentor"===I?"/mentor":"/dashboard",{replace:!0})}else E({general:e.data.message||"Authentication failed"})}catch(c){let e="Network error. Please try again.";401===(null==(t=c.response)?void 0:t.status)?e=(null==(n=null==(r=null==(a=c.response)?void 0:a.data)?void 0:r.message)?void 0:n.includes("password"))?"Invalid password":(null==(l=null==(i=null==(o=c.response)?void 0:o.data)?void 0:i.message)?void 0:l.includes("user"))?"No user found with this email":"Invalid credentials":(null==(d=null==(m=c.response)?void 0:m.data)?void 0:d.message)&&(e=c.response.data.message),E({general:e})}finally{$(!1)}}},className:"space-y-4 sm:space-y-6",children:[q.general&&t.jsx("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 text-red-600 dark:text-red-400 px-3 sm:px-4 py-2 sm:py-3 rounded-lg text-xs sm:text-sm",children:q.general}),"register"===k&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:b("auth.fullName")}),t.jsx(o,{type:"text",name:"name",value:C.name,onChange:O,placeholder:"Enter your full name",leftIcon:t.jsx(u,{className:"w-4 h-4 text-gray-400"}),error:q.name,required:!0,className:"touch-target min-h-[44px]"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:b("auth.email")}),t.jsx(o,{type:"email",name:"email",value:C.email,onChange:O,placeholder:"Enter your email",leftIcon:t.jsx(h,{className:"w-4 h-4 text-gray-400"}),error:q.email,required:!0,className:"touch-target min-h-[44px]"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:b("auth.password")}),t.jsx(o,{type:z?"text":"password",name:"password",value:C.password,onChange:O,placeholder:"Enter your password",leftIcon:t.jsx(y,{className:"w-4 h-4 text-gray-400"}),rightIcon:t.jsx("button",{type:"button",onClick:()=>B(!z),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200 p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-600 touch-target min-h-[40px] min-w-[40px] flex items-center justify-center",children:z?t.jsx(g,{className:"w-4 h-4"}):t.jsx(p,{className:"w-4 h-4"})}),error:q.password,required:!0,className:"touch-target min-h-[44px]"})]}),"register"===k&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:b("auth.confirmPassword")}),t.jsx(o,{type:D?"text":"password",name:"confirmPassword",value:C.confirmPassword,onChange:O,placeholder:"Confirm your password",leftIcon:t.jsx(y,{className:"w-4 h-4 text-gray-400"}),rightIcon:t.jsx("button",{type:"button",onClick:()=>H(!D),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200 p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-600 touch-target min-h-[40px] min-w-[40px] flex items-center justify-center",children:D?t.jsx(g,{className:"w-4 h-4"}):t.jsx(p,{className:"w-4 h-4"})}),error:q.confirmPassword,required:!0,className:"touch-target min-h-[44px]"})]}),t.jsx(a,{type:"submit",disabled:M,className:"w-full touch-target min-h-[48px] text-sm sm:text-base",size:"lg",children:M?t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),b("login"===k?"auth.signingIn":"auth.creatingAccount")]}):t.jsxs("div",{className:"flex items-center justify-center",children:[b("login"===k?"auth.signIn":"auth.createAccount"),t.jsx(w,{className:"w-4 h-4 ml-2"})]})}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-300",children:b("login"===k?"auth.noAccount":"auth.haveAccount")}),t.jsx("button",{type:"button",onClick:()=>{P("login"===k?"register":"login"),A({name:"",email:"",password:"",confirmPassword:""}),E({})},className:"text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium mt-1 touch-target min-h-[44px] px-2 py-1",children:b("login"===k?"auth.createAccount":"auth.signIn")})]})]}),t.jsx("div",{className:"mt-4 sm:mt-6 text-center",children:t.jsx("button",{onClick:()=>N("/"),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 text-sm touch-target min-h-[44px] px-2 py-1",children:"‚Üê Back to Home"})})]})})})};export{j as default};
//# sourceMappingURL=Login-D8E8sicd.js.map
