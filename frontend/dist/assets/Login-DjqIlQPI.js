import{u as e,j as a,B as s,a as t}from"./index-DIJt-PvO.js";import{r}from"./vendor-CcJAMPNA.js";import{C as n}from"./Card-M9kobZdF.js";import{I as l}from"./Input-Bn5iY8so.js";import{u as o}from"./i18n-BFZeVeRj.js";import{a as i,u as m}from"./router-C42e25Rd.js";import{m as d,U as c,c as x,E as u,o as h,p as g,A as p}from"./ui-DTi7QonQ.js";import"./charts-CYIsZ7Q-.js";import"./forms-CFEThZtO.js";const y=()=>{var y,w;const{t:j}=o(),{login:f}=e(),b=i(),v=(null==(w=null==(y=m().state)?void 0:y.from)?void 0:w.pathname)||"/dashboard",[N,k]=r.useState("login"),[I,P]=r.useState({name:"",email:"",password:"",confirmPassword:""}),[S,C]=r.useState({}),[A,q]=r.useState(!1),[E,B]=r.useState(!1),[z,D]=r.useState(!1),H=e=>{const{name:a,value:s}=e.target;P(e=>({...e,[a]:s})),S[a]&&C(e=>({...e,[a]:""}))};return a.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center p-4 sm:p-6 lg:p-8",children:a.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md sm:max-w-lg",children:a.jsxs(n,{className:"p-6 sm:p-8 lg:p-10 shadow-2xl",children:[a.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[a.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16 bg-primary-600 rounded-full flex items-center justify-center mx-auto mb-3 sm:mb-4",children:a.jsx(c,{className:"w-7 h-7 sm:w-8 sm:h-8 text-white"})}),a.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white mb-2 sm:mb-3",children:j("login"===N?"auth.signIn":"auth.createAccount")}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-300 leading-relaxed px-2",children:j("login"===N?"auth.signInSubtitle":"auth.createAccountSubtitle")})]}),a.jsxs("form",{onSubmit:async e=>{var a,s,r,n,l,o,i,m,d;if(e.preventDefault(),(()=>{const e={};return"register"===N&&(I.name?I.name.length<2&&(e.name="Name must be at least 2 characters"):e.name="Name is required"),I.email?/\S+@\S+\.\S+/.test(I.email)||(e.email="Please enter a valid email"):e.email="Email is required",I.password?I.password.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required","register"===N&&(I.confirmPassword?I.password!==I.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password"),C(e),0===Object.keys(e).length})()){q(!0),C({});try{let e;e="login"===N?await t.login({email:I.email,password:I.password}):await t.register({name:I.name,email:I.email,password:I.password}),e.data.success?(localStorage.setItem("authToken",e.data.token),f(e.data.user),b(v,{replace:!0})):C({general:e.data.message||"Authentication failed"})}catch(c){let e="Network error. Please try again.";401===(null==(a=c.response)?void 0:a.status)?e=(null==(n=null==(r=null==(s=c.response)?void 0:s.data)?void 0:r.message)?void 0:n.includes("password"))?"Invalid password":(null==(i=null==(o=null==(l=c.response)?void 0:l.data)?void 0:o.message)?void 0:i.includes("user"))?"No user found with this email":"Invalid credentials":(null==(d=null==(m=c.response)?void 0:m.data)?void 0:d.message)&&(e=c.response.data.message),C({general:e})}finally{q(!1)}}},className:"space-y-4 sm:space-y-6",children:[S.general&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 text-red-600 dark:text-red-400 px-3 sm:px-4 py-2 sm:py-3 rounded-lg text-xs sm:text-sm",children:S.general}),"register"===N&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:j("auth.fullName")}),a.jsx(l,{type:"text",name:"name",value:I.name,onChange:H,placeholder:"Enter your full name",leftIcon:a.jsx(c,{className:"w-4 h-4 text-gray-400"}),error:S.name,required:!0,className:"touch-target min-h-[44px]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:j("auth.email")}),a.jsx(l,{type:"email",name:"email",value:I.email,onChange:H,placeholder:"Enter your email",leftIcon:a.jsx(x,{className:"w-4 h-4 text-gray-400"}),error:S.email,required:!0,className:"touch-target min-h-[44px]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:j("auth.password")}),a.jsx(l,{type:E?"text":"password",name:"password",value:I.password,onChange:H,placeholder:"Enter your password",leftIcon:a.jsx(g,{className:"w-4 h-4 text-gray-400"}),rightIcon:a.jsx("button",{type:"button",onClick:()=>B(!E),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200 p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-600 touch-target min-h-[40px] min-w-[40px] flex items-center justify-center",children:E?a.jsx(u,{className:"w-4 h-4"}):a.jsx(h,{className:"w-4 h-4"})}),error:S.password,required:!0,className:"touch-target min-h-[44px]"})]}),"register"===N&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:j("auth.confirmPassword")}),a.jsx(l,{type:z?"text":"password",name:"confirmPassword",value:I.confirmPassword,onChange:H,placeholder:"Confirm your password",leftIcon:a.jsx(g,{className:"w-4 h-4 text-gray-400"}),rightIcon:a.jsx("button",{type:"button",onClick:()=>D(!z),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200 p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-600 touch-target min-h-[40px] min-w-[40px] flex items-center justify-center",children:z?a.jsx(u,{className:"w-4 h-4"}):a.jsx(h,{className:"w-4 h-4"})}),error:S.confirmPassword,required:!0,className:"touch-target min-h-[44px]"})]}),a.jsx(s,{type:"submit",disabled:A,className:"w-full touch-target min-h-[48px] text-sm sm:text-base",size:"lg",children:A?a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),j("login"===N?"auth.signingIn":"auth.creatingAccount")]}):a.jsxs("div",{className:"flex items-center justify-center",children:[j("login"===N?"auth.signIn":"auth.createAccount"),a.jsx(p,{className:"w-4 h-4 ml-2"})]})}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-300",children:j("login"===N?"auth.noAccount":"auth.haveAccount")}),a.jsx("button",{type:"button",onClick:()=>{k("login"===N?"register":"login"),P({name:"",email:"",password:"",confirmPassword:""}),C({})},className:"text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium mt-1 touch-target min-h-[44px] px-2 py-1",children:j("login"===N?"auth.createAccount":"auth.signIn")})]})]}),a.jsx("div",{className:"mt-4 sm:mt-6 text-center",children:a.jsx("button",{onClick:()=>b("/"),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 text-sm touch-target min-h-[44px] px-2 py-1",children:"‚Üê Back to Home"})})]})})})};export{y as default};
//# sourceMappingURL=Login-DjqIlQPI.js.map
