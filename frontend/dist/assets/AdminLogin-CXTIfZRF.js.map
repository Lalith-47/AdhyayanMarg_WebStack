{"version":3,"file":"AdminLogin-CXTIfZRF.js","sources":["../../src/pages/AdminLogin.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { motion } from \"framer-motion\";\nimport { Shield, Eye, EyeOff, Mail, Lock, ArrowRight } from \"lucide-react\";\nimport { useTranslation } from \"react-i18next\";\nimport Button from \"../components/UI/Button\";\nimport Card from \"../components/UI/Card\";\nimport Input from \"../components/UI/Input\";\nimport { apiService } from \"../utils/api\";\nimport { useAuth } from \"../contexts/AuthContext\";\n\nconst AdminLogin = () => {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const { login } = useAuth();\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password: \"\",\n  });\n  const [showPassword, setShowPassword] = useState(false);\n  const [errors, setErrors] = useState({});\n  const [loading, setLoading] = useState(false);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n    if (errors[name]) {\n      setErrors((prev) => ({\n        ...prev,\n        [name]: \"\",\n      }));\n    }\n  };\n\n  const validateForm = () => {\n    const newErrors = {};\n    if (!formData.email) {\n      newErrors.email = \"Email is required\";\n    } else if (!/\\S+@\\S+\\.\\S+/.test(formData.email)) {\n      newErrors.email = \"Please enter a valid email\";\n    }\n    if (!formData.password) {\n      newErrors.password = \"Password is required\";\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!validateForm()) {\n      return;\n    }\n    setLoading(true);\n    setErrors({});\n\n    try {\n      console.log(\"Attempting admin login with:\", formData);\n      const response = await apiService.login(formData);\n      console.log(\"Admin login response:\", response.data);\n\n      if (response.data.success) {\n        if (response.data.user.role !== \"admin\") {\n          setErrors({ general: \"Access denied. Admin privileges required.\" });\n          setLoading(false);\n          return;\n        }\n\n        // Store token and update auth context\n        localStorage.setItem(\"authToken\", response.data.token);\n        login(response.data.user);\n\n        // Clear any existing errors before navigation\n        setErrors({});\n\n        // Add a small delay to ensure auth context is updated\n        setTimeout(() => {\n          navigate(\"/admin\");\n        }, 100);\n      } else {\n        setErrors({ general: response.data.message });\n      }\n    } catch (error) {\n      console.error(\"Admin login error:\", error);\n      let errorMessage = \"Network error. Please try again.\";\n\n      if (error.response?.status === 401) {\n        if (error.response?.data?.message?.includes(\"password\")) {\n          errorMessage = \"Invalid password\";\n        } else if (error.response?.data?.message?.includes(\"user\")) {\n          errorMessage = \"No user found with this email\";\n        } else {\n          errorMessage = \"Invalid credentials\";\n        }\n      } else if (error.response?.data?.message) {\n        errorMessage = error.response.data.message;\n      }\n\n      setErrors({ general: errorMessage });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-indigo-900 flex items-center justify-center p-4 relative overflow-hidden\">\n      {/* Background Pattern */}\n      <div className=\"absolute inset-0 opacity-20\">\n        <div className=\"absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg%20width%3D%2260%22%20height%3D%2260%22%20viewBox%3D%220%200%2060%2060%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cg%20fill%3D%22%239C92AC%22%20fill-opacity%3D%220.1%22%3E%3Ccircle%20cx%3D%2230%22%20cy%3D%2230%22%20r%3D%222%22/%3E%3C/g%3E%3C/g%3E%3C/svg%3E')]\"></div>\n      </div>\n\n      <motion.div\n        initial={{ opacity: 0, y: 20, scale: 0.95 }}\n        animate={{ opacity: 1, y: 0, scale: 1 }}\n        transition={{ duration: 0.6, ease: \"easeOut\" }}\n        className=\"w-full max-w-md relative z-10\"\n      >\n        <Card className=\"p-8 shadow-2xl bg-white/95 backdrop-blur-sm border border-white/20\">\n          {/* Header */}\n          <div className=\"text-center mb-8\">\n            <motion.div\n              className=\"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg\"\n              whileHover={{ scale: 1.05 }}\n              transition={{ type: \"spring\", stiffness: 300 }}\n            >\n              <Shield className=\"w-10 h-10 text-white\" />\n            </motion.div>\n            <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-3\">\n              {t(\"admin.title\")} Portal\n            </h1>\n            <p className=\"text-gray-600 dark:text-gray-300 text-lg\">\n              Secure access to administrative controls\n            </p>\n            <div className=\"w-16 h-1 bg-gradient-to-r from-red-500 to-purple-500 mx-auto mt-4 rounded-full\"></div>\n          </div>\n\n          {/* Form */}\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            {/* General Error */}\n            {errors.general && (\n              <div className=\"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 text-red-600 dark:text-red-400 px-4 py-3 rounded-lg text-sm font-medium\">\n                {errors.general}\n              </div>\n            )}\n\n            {/* Email Field */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                {t(\"auth.email\")}\n              </label>\n              <Input\n                type=\"email\"\n                name=\"email\"\n                value={formData.email}\n                onChange={handleChange}\n                placeholder=\"Enter admin email\"\n                leftIcon={<Mail className=\"w-4 h-4 text-gray-400\" />}\n                error={errors.email}\n                required\n                className=\"dark:bg-gray-800 dark:border-gray-600 dark:text-white\"\n              />\n            </div>\n\n            {/* Password Field */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                Password\n              </label>\n              <Input\n                type={showPassword ? \"text\" : \"password\"}\n                name=\"password\"\n                value={formData.password}\n                onChange={handleChange}\n                placeholder=\"Enter password\"\n                leftIcon={<Lock className=\"w-4 h-4 text-gray-400\" />}\n                rightIcon={\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowPassword(!showPassword)}\n                    className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200 p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-600\"\n                  >\n                    {showPassword ? (\n                      <EyeOff className=\"w-4 h-4\" />\n                    ) : (\n                      <Eye className=\"w-4 h-4\" />\n                    )}\n                  </button>\n                }\n                error={errors.password}\n                required\n                className=\"dark:bg-gray-800 dark:border-gray-600 dark:text-white\"\n              />\n            </div>\n\n            {/* Submit Button */}\n            <Button\n              type=\"submit\"\n              disabled={loading}\n              className=\"w-full bg-red-600 hover:bg-red-700 dark:bg-red-600 dark:hover:bg-red-700 text-white font-semibold py-3\"\n              size=\"lg\"\n            >\n              {loading ? (\n                <div className=\"flex items-center justify-center\">\n                  <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\" />\n                  Signing In...\n                </div>\n              ) : (\n                <div className=\"flex items-center justify-center\">\n                  {t(\"auth.signIn\")}\n                  <ArrowRight className=\"w-4 h-4 ml-2\" />\n                </div>\n              )}\n            </Button>\n\n            {/* Back to Home */}\n            <div className=\"mt-6 text-center\">\n              <button\n                onClick={() => navigate(\"/\")}\n                className=\"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 text-sm font-medium\"\n              >\n                ‚Üê Back to Home\n              </button>\n            </div>\n          </form>\n        </Card>\n      </motion.div>\n    </div>\n  );\n};\n\nexport default AdminLogin;\n"],"names":["AdminLogin","t","useTranslation","navigate","useNavigate","login","useAuth","formData","setFormData","useState","email","password","showPassword","setShowPassword","errors","setErrors","loading","setLoading","handleChange","e","name","value","target","prev","jsxs","className","children","jsx","motion","div","initial","opacity","y","scale","animate","transition","duration","ease","Card","whileHover","type","stiffness","Shield","onSubmit","async","preventDefault","newErrors","test","Object","keys","length","validateForm","response","apiService","data","success","user","role","general","localStorage","setItem","token","setTimeout","message","error","errorMessage","_a","status","_d","_c","_b","includes","_g","_e","_f","_i","_h","Input","onChange","placeholder","leftIcon","Mail","required","Lock","rightIcon","onClick","EyeOff","Eye","Button","disabled","size","ArrowRight"],"mappings":"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"}